<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√≤ng Quay FLY88</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  background: url("https://image.dienthoaivui.com.vn/x,webp,q90/https://dashboard.dienthoaivui.com.vn/uploads/dashboard/editor_upload/hinh-nen-than-tai-65.jpg");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  min-height: 100vh;
  font-family: 'Arial', sans-serif;
  overflow-x: hidden;
}

.fly88-banner {
  max-width: 90%;
  margin: 20px auto;
  padding: 12px;
  border-radius: 20px;
  background: linear-gradient(90deg, #ffb703, #fb8500);
  text-align: center;
  box-shadow: 0 0 25px rgba(255, 183, 3, 0.8);
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.03); }
  100% { transform: scale(1); }
}

.hidden-section { display: none !important; }

.wheel-stage {
  background: rgba(139, 0, 0, 0.9);
  backdrop-filter: blur(8px);
  border-radius: 30px;
  padding: 20px;
  border: 4px solid #ffd700;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  width: 100%;
  max-width: 400px;
}

.wheel-container {
  position: relative;
  width: 280px;
  height: 280px;
  margin: 0 auto;
}

@media (min-width: 640px) {
  .wheel-container {
    width: 320px;
    height: 320px;
  }
}

#wheelCanvas {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 8px solid #ffd700;
  transition: transform 8s cubic-bezier(0.15, 0, 0.15, 1);
  background-color: #fff;
}

.pointer {
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  width: 45px;
  z-index: 50;
  filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
}

/* ·∫®n b·∫£ng v√†ng tr√™n mobile */
.live-feed {
  display: none; 
  width: 230px;
  height: 450px;
  background: rgba(40, 0, 0, 0.9);
  border: 3px solid #ffd700;
  border-radius: 20px;
  overflow: hidden;
  position: relative;
}

@media (min-width: 1280px) {
  .live-feed {
    display: block;
  }
}

.feed-header {
  background: linear-gradient(to bottom, #ff0000, #b70000);
  color: #fff;
  text-align: center;
  padding: 12px;
  font-weight: 900;
  border-bottom: 3px solid #ffd700;
  text-transform: uppercase;
}

.feed-container {
  height: 385px;
  overflow: hidden;
  position: relative;
}

.feed-content {
  position: absolute;
  width: 100%;
  top: 0;
  animation: scrollFeed 60s linear infinite;
}

@keyframes scrollFeed {
  0% { transform: translateY(0); }
  100% { transform: translateY(-50%); }
}

.win-item {
  background: linear-gradient(135deg, rgba(255,215,0,0.1) 0%, rgba(0,0,0,0.3) 100%);
  border-left: 4px solid #ffd700;
  margin-bottom: 10px;
  padding: 10px;
  border-radius: 4px;
}

.glow-text {
  color: #ffd700;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.6);
  font-weight: 800;
}

.li-xi-modal {
  background: #e63946;
  border: 5px solid #ffd700;
  border-radius: 25px;
  position: relative;
  overflow: hidden;
  max-width: 320px;
  width: 90%;
  box-shadow: 0 0 50px rgba(0,0,0,0.8);
}

.li-xi-top {
  height: 100px;
  background: #bc1823;
  border-bottom: 4px solid #ffd700;
  border-radius: 0 0 50% 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.mega-win-effect {
  animation: mega-glow 0.6s infinite alternate;
}

@keyframes mega-glow {
  from { box-shadow: 0 0 30px #ff0, 0 0 50px #f00; }
  to { box-shadow: 0 0 50px #ff0, 0 0 80px #f00; }
}
</style>
</head>

<body class="flex flex-col items-center p-4">

<!-- LOGO -->
<img src="https://i.ibb.co/tMG3CDd2/title1.png" alt="FLY88" class="w-full max-w-[500px] my-4 drop-shadow-2xl">

<div class="mb-4">
    <button onclick="showGuide()" class="px-6 py-2 bg-gradient-to-r from-red-600 to-red-800 border-2 border-yellow-400 text-yellow-300 rounded-full font-black hover:scale-105 transition shadow-xl uppercase italic text-sm sm:text-base">
        üî• H∆Ø·ªöNG D·∫™N QUAY üî•
    </button>
</div>

<!-- PH·∫¶N 1: NH·∫¨P TH√îNG TIN -->
<div id="info-step" class="w-full max-w-4xl flex flex-col items-center px-2">
    <div class="flex flex-col gap-4 items-center mb-8 w-full max-w-sm">
        <input type="text" id="nameInput"
            placeholder="T√™n t√†i kho·∫£n FLY88..."
            class="w-full h-12 rounded-full px-6 bg-blue-500/40 text-white placeholder-white/70 border-2 border-blue-400 outline-none backdrop-blur-sm font-bold text-center">
      
        <input type="tel" id="phoneInput"
            maxlength="10"
            placeholder="S·ªë ƒëi·ªán tho·∫°i (10 s·ªë)..."
            class="w-full h-12 rounded-full px-6 bg-blue-500/40 text-white placeholder-white/70 border-2 border-blue-400 outline-none backdrop-blur-sm font-bold text-center">
      
        <button onclick="goToWheel()"
          class="w-full h-12 bg-gradient-to-r from-yellow-400 to-orange-600 text-red-900 rounded-full font-black hover:scale-105 transition shadow-2xl uppercase italic border-b-4 border-orange-800">
          Ti·∫øp t·ª•c
        </button>
    </div>
</div>

<!-- PH·∫¶N 2: V√íNG QUAY -->
<div id="wheel-step" class="hidden-section flex flex-col xl:flex-row items-center justify-center gap-8 w-full max-w-7xl">
    <!-- B·∫£ng v√†ng b√™n tr√°i (ch·ªâ hi·ªán tr√™n XL) -->
    <div class="live-feed">
        <div class="feed-header">DANH S√ÅCH TR√öNG GI·∫¢I</div>
        <div class="feed-container">
            <div id="leftFeed" class="feed-content p-3"></div>
        </div>
    </div>

    <div class="wheel-stage">
        <div class="wheel-container mb-6">
            <img src="https://cdn-icons-png.flaticon.com/512/8213/8213010.png" class="pointer" alt="pointer">
            <canvas id="wheelCanvas" width="500" height="500"></canvas>
        </div>
        <div class="space-y-3">
            <input type="text" id="codeSpinner" placeholder="NH·∫¨P M√É CODE QUAY..."
              class="w-full h-12 rounded-xl px-4 bg-white text-red-700 font-black border-4 border-yellow-500 outline-none text-center text-xl uppercase">
            <button id="spinBtn" onclick="doSpin()"
              class="w-full h-14 bg-gradient-to-b from-red-500 to-red-700 text-white rounded-xl font-black text-2xl shadow-2xl active:scale-95 border-b-4 border-red-900 uppercase italic">
              Quay Ngay
            </button>
        </div>
    </div>

    <!-- B·∫£ng v√†ng b√™n ph·∫£i (ch·ªâ hi·ªán tr√™n XL) -->
    <div class="live-feed">
        <div class="feed-header">VIP TR√öNG L·ªöN</div>
        <div class="feed-container">
            <div id="rightFeed" class="feed-content p-3"></div>
        </div>
    </div>
</div>

<div class="fly88-banner">
  <a href="https://www.fly88a.win" target="_blank" class="block font-black text-sm sm:text-lg text-white">
    üî• ƒêƒÇNG K√ç T√ÄI KHO·∫¢N T·∫†I WWW.FLY88A.WIN üî•
  </a>
</div>

<!-- B·∫¢NG H∆Ø·ªöNG D·∫™N (MODAL) -->
<div id="guideModal" class="fixed inset-0 bg-black/80 hidden items-center justify-center z-[300] p-4">
    <div class="bg-white rounded-3xl w-full max-w-md overflow-hidden border-4 border-yellow-500">
        <div class="bg-red-700 p-4 text-center text-white font-black text-xl uppercase">H∆∞·ªõng D·∫´n Quay Th∆∞·ªüng</div>
        <div class="p-6 text-gray-800 space-y-4">
            <div class="flex gap-3">
                <span class="bg-red-600 text-white w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center font-bold">1</span>
                <p>Truy c·∫≠p <a href="https://www.fly88a.win" target="_blank" class="text-red-600 font-black underline">FLY88A.WIN</a> ƒë·ªÉ ƒëƒÉng k√Ω v√† nh·∫≠n m√£ Code khuy·∫øn m√£i.</p>
            </div>
            <div class="flex gap-3">
                <span class="bg-red-600 text-white w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center font-bold">2</span>
                <p>Nh·∫≠p ƒë√∫ng <b>T√™n t√†i kho·∫£n</b> v√† <b>S·ªë ƒëi·ªán tho·∫°i</b> ƒë·ªÉ x√°c th·ª±c.</p>
            </div>
            <div class="flex gap-3">
                <span class="bg-red-600 text-white w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center font-bold">3</span>
                <p>Nh·∫≠p m√£ Code v√†o √¥ v√† nh·∫•n <b>QUAY NGAY</b>. Sau khi tr√∫ng th∆∞·ªüng, ch·ª•p m√†n h√¨nh v√† g·ª≠i Admin.</p>
            </div>
            <button onclick="closeGuide()" class="w-full py-3 bg-red-700 text-white font-black rounded-xl uppercase mt-4">T√¥i ƒë√£ hi·ªÉu</button>
        </div>
    </div>
</div>

<!-- MODAL TR√öNG TH∆Ø·ªûNG -->
<div id="resultModal" class="fixed inset-0 bg-black/95 hidden items-center justify-center z-[200] p-4">
    <div id="modalBox" class="li-xi-modal">
        <div class="li-xi-top">
            <div class="w-14 h-14 bg-yellow-400 rounded-full border-4 border-red-800 flex items-center justify-center shadow-lg">
                <span class="text-red-700 font-black text-2xl">Á¶è</span>
            </div>
        </div>
        <div class="p-6 text-center text-white">
            <h2 class="text-3xl font-black mb-1 uppercase italic text-yellow-300">CH√öC M·ª™NG</h2>
            <p id="winnerName" class="text-[10px] font-bold mb-4 text-white/80 uppercase"></p>
            <div class="text-[10px] uppercase tracking-widest text-yellow-200 mb-1">B·∫°n v·ª´a nh·∫≠n ƒë∆∞·ª£c:</div>
            <div id="prizeResult" class="text-6xl font-black text-yellow-300 mb-4 drop-shadow-lg">0K</div>
            <p class="text-[10px] italic text-yellow-100 mb-6 font-bold">Li√™n h·ªá admin ƒë·ªÉ nh·∫≠n gi·∫£i</p>
            <button onclick="window.location.reload()" class="w-full py-3 bg-yellow-400 text-red-900 font-black rounded-xl text-lg uppercase shadow-lg active:scale-95 transition">X√°c Nh·∫≠n</button>
        </div>
    </div>
</div>

<script>
const prizes = ["8K", "18K", "28K", "38K", "88K", "188K", "588K", "888K", "1888K"];
const bgColors = ["#E63946","#457B9D","#FFB703","#2A9D8F","#8338EC","#FB5607","#3A86FF","#FF006E"];

// ====== DANH S√ÅCH CODE M·ªöI (20 CODE / M·ªÜNH GI√Å) ======
const CODE_MAP = {
  "8K": [
    "FLY8K001","FLY8K002","FLY8K003","FLY8K004","FLY8K005",
    "FLY8K006","FLY8K007","FLY8K008","FLY8K009","FLY8K010",
    "FLY8K011","FLY8K012","FLY8K013","FLY8K014","FLY8K015",
    "FLY8K016","FLY8K017","FLY8K018","FLY8K019","FLY8K020"
  ],
  "18K": [
    "FLY18K001","FLY18K002","FLY18K003","FLY18K004","FLY18K005",
    "FLY18K006","FLY18K007","FLY18K008","FLY18K009","FLY18K010",
    "FLY18K011","FLY18K012","FLY18K013","FLY18K014","FLY18K015",
    "FLY18K016","FLY18K017","FLY18K018","FLY18K019","FLY18K020"
  ],
  "28K": [
    "FLY28K001","FLY28K002","FLY28K003","FLY28K004","FLY28K005",
    "FLY28K006","FLY28K007","FLY28K008","FLY28K009","FLY28K010",
    "FLY28K011","FLY28K012","FLY28K013","FLY28K014","FLY28K015",
    "FLY28K016","FLY28K017","FLY28K018","FLY28K019","FLY28K020"
  ],
  "38K": [
    "FLY38K001","FLY38K002","FLY38K003","FLY38K004","FLY38K005",
    "FLY38K006","FLY38K007","FLY38K008","FLY38K009","FLY38K010",
    "FLY38K011","FLY38K012","FLY38K013","FLY38K014","FLY38K015",
    "FLY38K016","FLY38K017","FLY38K018","FLY38K019","FLY38K020"
  ],
  "88K": [
    "FLY88K001","FLY88K002","FLY88K003","FLY88K004","FLY88K005",
    "FLY88K006","FLY88K007","FLY88K008","FLY88K009","FLY88K010",
    "FLY88K011","FLY88K012","FLY88K013","FLY88K014","FLY88K015",
    "FLY88K016","FLY88K017","FLY88K018","FLY88K019","FLY88K020"
  ],
  "188K": [
    "FLY188K001","FLY188K002","FLY188K003","FLY188K004","FLY188K005",
    "FLY188K006","FLY188K007","FLY188K008","FLY188K009","FLY188K010",
    "FLY188K011","FLY188K012","FLY188K013","FLY188K014","FLY188K015",
    "FLY188K016","FLY188K017","FLY188K018","FLY188K019","FLY188K020"
  ],
  "588K": [
    "FLY588K001","FLY588K002","FLY588K003","FLY588K004","FLY588K005",
    "FLY588K006","FLY588K007","FLY588K008","FLY588K009","FLY588K010",
    "FLY588K011","FLY588K012","FLY588K013","FLY588K014","FLY588K015",
    "FLY588K016","FLY588K017","FLY588K018","FLY588K019","FLY588K020"
  ],
  "888K": [
    "FLY888K001","FLY888K002","FLY888K003","FLY888K004","FLY888K005",
    "FLY888K006","FLY888K007","FLY888K008","FLY888K009","FLY888K010",
    "FLY888K011","FLY888K012","FLY888K013","FLY888K014","FLY888K015",
    "FLY888K016","FLY888K017","FLY888K018","FLY888K019","FLY888K020"
  ],
  "1888K": [
    "FLY1888K001","FLY1888K002","FLY1888K003","FLY1888K004","FLY1888K005",
    "FLY1888K006","FLY1888K007","FLY1888K008","FLY1888K009","FLY1888K010",
    "FLY1888K011","FLY1888K012","FLY1888K013","FLY1888K014","FLY1888K015",
    "FLY1888K016","FLY1888K017","FLY1888K018","FLY1888K019","FLY1888K020"
  ]
};

// ====== L∆ØU CODE ƒê√É D√ôNG (1 L·∫¶N) ======
let usedCodes = JSON.parse(localStorage.getItem("USED_CODES") || "[]");

function saveUsedCodes() {
  localStorage.setItem("USED_CODES", JSON.stringify(usedCodes));
}

// ====== KI·ªÇM TRA CODE ======
function checkCode(inputCode) {
  inputCode = inputCode.toUpperCase();

  // n·∫øu code ƒë√£ d√πng r·ªìi
  if (usedCodes.includes(inputCode)) {
    return { ok: false, msg: "M√£ n√†y ƒë√£ ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªìi!" };
  }

  // t√¨m xem code thu·ªôc m·ªánh gi√° n√†o
  for (let prize in CODE_MAP) {
    if (CODE_MAP[prize].includes(inputCode)) {
      return { ok: true, prize: prize };
    }
  }

  return { ok: false, msg: "M√£ Code kh√¥ng ch√≠nh x√°c!" };
}


const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d');
let isSpinning = false;

function drawWheel() {
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = centerX - 10;
    const sliceAngle = (2 * Math.PI) / prizes.length;

    prizes.forEach((prize, i) => {
        const startAngle = i * sliceAngle;
        const endAngle = startAngle + sliceAngle;
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.arc(centerX, centerY, radius, startAngle, endAngle);
        ctx.fillStyle = bgColors[i];
        ctx.fill();
        ctx.strokeStyle = "#ffd700";
        ctx.lineWidth = 4;
        ctx.stroke();

        ctx.save();
        ctx.translate(centerX, centerY);
        ctx.rotate(startAngle + sliceAngle / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 32px Arial";
        ctx.shadowBlur = 4;
        ctx.shadowColor = "black";
        ctx.fillText(prize, radius - 30, 12);
        ctx.restore();
    });

    ctx.beginPath();
    ctx.arc(centerX, centerY, 50, 0, 2 * Math.PI);
    ctx.fillStyle = "#fff";
    ctx.fill();
    ctx.strokeStyle = "#ffd700";
    ctx.lineWidth = 6;
    ctx.stroke();
    ctx.fillStyle = "#d00000";
    ctx.font = "bold 22px Arial";
    ctx.textAlign = "center";
    ctx.fillText("FLY88", centerX, centerY + 8);
}

function goToWheel() {
    const name = document.getElementById('nameInput').value.trim();
    const phone = document.getElementById('phoneInput').value.trim();
    if (!name) { alert("Vui l√≤ng nh·∫≠p t√™n t√†i kho·∫£n!"); return; }
    if (!/^[0-9]{10}$/.test(phone)) { alert("S·ªë ƒëi·ªán tho·∫°i kh√¥ng h·ª£p l·ªá!"); return; }

    document.getElementById('info-step').classList.add('hidden-section');
    document.getElementById('wheel-step').classList.remove('hidden-section');
    generateFeeds();
    drawWheel();
}

function generateFeeds() {
    const left = document.getElementById('leftFeed');
    const right = document.getElementById('rightFeed');
    if (!left || !right) return;
    const players = ["TuanKiet", "HoangNam", "VietDung", "AnhDuy", "GiaBao", "HuuThang", "DuyManh", "MinhBach"];
    const pList = ["8K", "18K", "28K", "88K", "188K", "388K", "588K", "888K"];
    let content = "";
    for(let i=0; i<40; i++) {
        const p = players[Math.floor(Math.random()*players.length)] + Math.floor(Math.random()*99);
        const val = pList[Math.floor(Math.random()*pList.length)];
        content += `<div class="win-item"><div class="text-white text-xs font-bold mb-1">Th√†nh vi√™n: <span class="text-blue-300">${p}</span></div><div class="text-sm">V·ª´a tr√∫ng: <span class="glow-text text-lg">${val}</span></div></div>`;
    }
    left.innerHTML = content + content;
    right.innerHTML = content + content;
}

function doSpin() {
    if (isSpinning) return;
    const codeInput = document.getElementById('codeSpinner').value.trim().toUpperCase();

    const result = checkCode(codeInput);
    if (!result.ok) {
        alert(result.msg);
        return;
    }

    const targetPrize = result.prize;

    // ƒë√°nh d·∫•u code ƒë√£ d√πng
    usedCodes.push(codeInput);
    saveUsedCodes();

const prizeIndex = prizes.indexOf(targetPrize);
    isSpinning = true;
    
    const sliceAngle = 360 / prizes.length;
    const stopAt = 360 - (prizeIndex * sliceAngle) - (sliceAngle / 2);
    const totalRotation = (10 * 360) + stopAt - 90;

    canvas.style.transform = `rotate(${totalRotation}deg)`;

    setTimeout(() => {
        isSpinning = false;
        if (parseInt(targetPrize) >= 188) {
            document.getElementById('modalBox').classList.add('mega-win-effect');
        }
        document.getElementById('winnerName').innerText = "T√†i kho·∫£n: " + document.getElementById('nameInput').value;
        document.getElementById('prizeResult').innerText = targetPrize;
        document.getElementById('resultModal').style.display = 'flex';
    }, 8200);
}

function showGuide() { document.getElementById('guideModal').style.display = 'flex'; }
function closeGuide() { document.getElementById('guideModal').style.display = 'none'; }
</script>

</body>
</html>
